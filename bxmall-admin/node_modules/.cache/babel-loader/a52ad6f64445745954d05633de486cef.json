{"remainingRequest":"D:\\banxue-repository\\bxmall-frontend\\linjiashop-admin\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js!D:\\banxue-repository\\bxmall-frontend\\linjiashop-admin\\src\\views\\account\\updatePwd.js","dependencies":[{"path":"D:\\banxue-repository\\bxmall-frontend\\linjiashop-admin\\src\\views\\account\\updatePwd.js","mtime":1611565388526},{"path":"D:\\banxue-repository\\bxmall-frontend\\linjiashop-admin\\node_modules\\_cache-loader@2.0.1@cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\banxue-repository\\bxmall-frontend\\linjiashop-admin\\node_modules\\_babel-loader@8.2.2@babel-loader\\lib\\index.js","mtime":315532800000}],"contextDependencies":[],"result":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nrequire(\"core-js/modules/es6.function.name\");\n\nvar _user = require(\"@/api/user\");\n\nvar _default = {\n  data: function data() {\n    return {\n      form: {\n        oldPassword: '',\n        password: '',\n        rePassword: ''\n      },\n      activeName: 'updatePwd',\n      user: {}\n    };\n  },\n  computed: {\n    rules: function rules() {\n      return {\n        password: [{\n          required: true,\n          message: '密码不能为空',\n          trigger: 'blur'\n        }, {\n          min: 5,\n          max: 100,\n          message: '密码长度不能小于5',\n          trigger: 'blur'\n        }]\n      };\n    }\n  },\n  mounted: function mounted() {\n    this.init();\n  },\n  methods: {\n    init: function init() {\n      this.user = this.$store.state.user.profile;\n    },\n    handleClick: function handleClick(tab, event) {\n      this.$router.push({\n        path: '/account/' + tab.name\n      });\n    },\n    updatePwd: function updatePwd() {\n      var _this = this;\n\n      this.$refs['form'].validate(function (valid) {\n        if (valid) {\n          (0, _user.updatePwd)({\n            oldPassword: _this.form.oldPassword,\n            password: _this.form.password,\n            rePassword: _this.form.rePassword\n          }).then(function (response) {\n            _this.$message({\n              message: '密码修改成功',\n              type: 'success'\n            }); //退出登录，该操作是个异步操作，所以后面跳转到登录页面延迟1s再执行（如果有更好的方法再调整）\n\n\n            _this.$store.dispatch('user/logout');\n\n            var self = _this;\n            setTimeout(function () {\n              self.$router.push(\"/login\");\n            }, 1000);\n          }).catch(function (err) {});\n        }\n      });\n    }\n  }\n};\nexports.default = _default;",null]}